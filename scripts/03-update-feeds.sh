#!/bin/bash
#
# ============================================================================
# è„šæœ¬åç§°: 03-update-feeds.sh
# åŠŸèƒ½æè¿°: æ›´æ–°å¹¶å®‰è£… Feedsï¼ˆè½¯ä»¶åŒ…æºï¼‰
# ============================================================================
# ä½œç”¨:
#   1. æ›´æ–°æ‰€æœ‰ feeds æºåˆ°æœ€æ–°ç‰ˆæœ¬ï¼ˆpackagesã€luciã€routing ç­‰ï¼‰
#   2. å®‰è£…æ‰€æœ‰ feeds ä¸­çš„è½¯ä»¶åŒ…åˆ° staging_dir
# ============================================================================
#

set -e  # é‡åˆ°é”™è¯¯ç«‹å³é€€å‡º

echo "========================================="
echo "ğŸ”„ æ›´æ–°å¹¶å®‰è£… Feeds..."
echo "========================================="

# è¿›å…¥ OpenWrt æºç ç›®å½•
cd openwrt

# æ›´æ–°æ‰€æœ‰ feeds æºåˆ°æœ€æ–°ç‰ˆæœ¬ï¼ˆpackagesã€luciã€routing ç­‰ï¼‰
echo "[1/2] æ›´æ–°æ‰€æœ‰ feeds æºåˆ°æœ€æ–°ç‰ˆæœ¬..."
./scripts/feeds update -a

# å®‰è£…æ‰€æœ‰ feeds ä¸­çš„è½¯ä»¶åŒ…åˆ° staging_dir
echo "[2/2] å®‰è£…æ‰€æœ‰ feeds è½¯ä»¶åŒ…..."
./scripts/feeds install -a

echo "âœ… Feeds æ›´æ–°å®‰è£…å®Œæˆï¼"

